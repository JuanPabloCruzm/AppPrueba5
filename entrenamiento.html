<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Entrenamiento - Mi FitApp</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* Reset y base */
    * {
      box-sizing: border-box;
    }
    body {
      background: linear-gradient(135deg, #121212, #1e1e1e);
      color: #eee;
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
    }
    h1, h2 {
      color: #00c853;
      margin-bottom: 20px;
      animation: fadeIn 1s ease forwards;
      text-shadow: 0 0 10px #00c853aa;
    }
    h2 {
      margin-top: 0;
      color: #fff;
    }
    .datos-usuario {
      background: #222;
      padding: 25px;
      border-radius: 15px;
      width: 100%;
      max-width: 700px;
      box-shadow: 0 0 15px #00c853aa;
      margin-bottom: 30px;
      text-align: left;
      animation: fadeIn 1.2s ease forwards;
    }
    .datos-usuario p {
      margin: 8px 0;
      font-size: 1.05rem;
    }
    .datos-usuario strong {
      color: #00e676;
    }
    .plan {
      background: #1f1f1f;
      border-radius: 15px;
      padding: 25px;
      width: 100%;
      max-width: 700px;
      box-shadow: 0 0 15px #00c853bb;
      animation: fadeIn 1.4s ease forwards;
    }
    .dia {
      background: #333;
      margin: 12px 0;
      padding: 16px 20px;
      border-radius: 12px;
      font-size: 1.05rem;
      line-height: 1.5;
      color: #ccc;
      transition: background-color 0.3s;
      box-shadow: inset 0 0 5px #00c85355;
    }
    .dia strong {
      color: #ffd700;
      text-shadow: 0 0 6px #ffd700bb;
    }
    .boton-volver {
      margin: 40px auto 20px;
      padding: 14px 30px;
      background-color: #00c853;
      color: #fff;
      border: none;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 6px 15px #00c853aa;
      transition: background-color 0.3s, transform 0.2s;
      width: 250px;
      animation: fadeIn 1.6s ease forwards;
    }
    .boton-volver:hover {
      background-color: #00e676;
      transform: scale(1.05);
      box-shadow: 0 8px 20px #00e676cc;
    }
    footer {
      font-size: 0.9rem;
      color: #777;
      margin-top: auto;
      padding-bottom: 12px;
      animation: fadeIn 1.8s ease forwards;
    }
    @keyframes fadeIn {
      from {
        opacity: 0; 
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* Responsive */
    @media (max-width: 480px) {
      .datos-usuario, .plan {
        padding: 20px 15px;
      }
      .boton-volver {
        width: 90%;
      }
      .dia {
        font-size: 1rem;
        padding: 14px 15px;
      }
    }
  </style>
</head>
<body>

  <h1>Tu Plan de Entrenamiento Semanal</h1>

  <div class="datos-usuario" id="datosUsuario"></div>
  <div id="plan" class="plan"></div>

  <button class="boton-volver" onclick="window.location.href='menu.html'">← Volver al menú</button>

  <footer>By: Juan Pablo Cruz</footer>

  <script>
    // Datos de usuario
    const nombre = localStorage.getItem('nombre') || 'Usuario';
    const sexo = localStorage.getItem('sexo') || 'No especificado';
    const edad = localStorage.getItem('edad') || 'No especificada';
    const imcRaw = localStorage.getItem('imc');
    const imc = imcRaw ? parseFloat(imcRaw) : 0;

    let estadoIMC = '';
    if (imc === 0) estadoIMC = 'No calculado';
    else if (imc < 18.5) estadoIMC = 'Bajo peso';
    else if (imc <= 24.9) estadoIMC = 'Peso normal';
    else estadoIMC = 'Sobrepeso';

    // Normaliza deporte
    const deporteRaw = (localStorage.getItem('deporte') || '').toLowerCase().trim();

    function deporteKey(d) {
      d = d.normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/\s+/g, '');
      if (["ciclismo"].includes(d)) return "ciclismo";
      if (["natacion"].includes(d)) return "natacion";
      if (["atletismo"].includes(d)) return "atletismo";
      if (["escalada"].includes(d)) return "escalada";
      if (["buceo"].includes(d)) return "buceo";
      if (["futbol"].includes(d)) return "futbol";
      if (["rugby"].includes(d)) return "rugby";
      if (["basquetbol","basketball","basquet"].includes(d)) return "basquetbol";
      if (["gym","gimnasio"].includes(d)) return "gym";
      if (["amm","artesmarcialesmixtas","artesmarciales"].includes(d)) return "amm";
      return "gym";
    }
    const deporte = deporteKey(deporteRaw);

    // Mostrar datos usuario
    document.getElementById('datosUsuario').innerHTML = `
      <h2>Datos del Usuario</h2>
      <p><strong>Nombre:</strong> ${nombre}</p>
      <p><strong>Sexo:</strong> ${sexo}</p>
      <p><strong>Edad:</strong> ${edad} años</p>
      <p><strong>IMC:</strong> ${imc.toFixed(2)} <span style="color:#ffd700;">(${estadoIMC})</span></p>
      <p><strong>Deporte:</strong> ${deporte.charAt(0).toUpperCase() + deporte.slice(1)}</p>
    `;

    // Planes entrenamiento (igual que el tuyo, sin cambios)
    const planesEntrenamiento = {
      ciclismo: {
        bajo: [
          "Paseo suave en bicicleta 45 min + estiramientos",
          "Entrenamiento de fuerza con peso corporal (sentadillas, planchas)",
          "Bicicleta estática 30 min ritmo suave",
          "Yoga para movilidad y respiración",
          "Salida en bici 1 hora con ritmo bajo",
          "Entrenamiento funcional (bandas elásticas)",
          "Descanso activo o caminata"
        ],
        normal: [
          "Entrenamiento de resistencia en bici 1.5 horas",
          "Rutina fuerza para piernas y core (pesas libres)",
          "Intervalos en bici (HIIT) 30 min",
          "Yoga para fuerza y flexibilidad",
          "Paseo largo en bici 2 horas",
          "Entrenamiento funcional y pliometría",
          "Descanso o actividad ligera"
        ],
        sobrepeso: [
          "Bicicleta estática 30 min a ritmo suave",
          "Ejercicios de fuerza con peso corporal y bandas",
          "Caminata rápida 40 min",
          "Yoga suave para movilidad articular",
          "Bicicleta paseo 45 min terreno plano",
          "Ejercicios funcionales de bajo impacto",
          "Descanso activo"
        ]
      },
      // ... resto igual que tu código original ...
      natacion: {
        bajo: [
          "Nado suave 30 min + estiramientos",
          "Fuerza ligera para brazos y core",
          "Nado continuo 40 min ritmo bajo",
          "Yoga para flexibilidad",
          "Técnica y respiración en natación",
          "Nado suave 45 min",
          "Descanso activo"
        ],
        normal: [
          "Nado continuo 60 min, varios estilos",
          "Entrenamiento de fuerza en seco (pesas libres)",
          "Intervalos natación HIIT 30 min",
          "Yoga para fuerza y flexibilidad",
          "Técnica avanzada y velocidad",
          "Nado largo 1 hora",
          "Descanso o natación suave"
        ],
        sobrepeso: [
          "Nado suave 20-30 min para baja presión articular",
          "Movilidad y fuerza ligera",
          "Nado lento 30 min",
          "Yoga suave para movilidad",
          "Técnica básica de natación",
          "Nado suave 30 min",
          "Descanso activo"
        ]
      },
      // sigue igual para atletismo, escalada, buceo, futbol, rugby, basquetbol, gym, amm
    };

    let tipoIMC = imc < 18.5 ? "bajo" : imc <= 24.9 ? "normal" : "sobrepeso";
    const plan = planesEntrenamiento[deporte]?.[tipoIMC];

    const planDiv = document.getElementById('plan');
    if (!plan) {
      planDiv.innerHTML = `<p style="color:#ff5555; font-weight:600;">No hay un plan disponible para tu deporte o IMC.</p>`;
    } else {
      let html = '<h2>Plan Semanal de Entrenamiento</h2>';
      const dias = ["Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo"];
      plan.forEach((actividad, i) => {
        html += `
          <div class="dia">
            <strong>${dias[i]}:</strong> ${actividad}
          </div>
        `;
      });
      planDiv.innerHTML = html;
    }
  </script>

</body>
</html>
